<!DOCTYPE html>
<html><head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>iMessage Wrapped 2025</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üåØ</text></svg>">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Silkscreen&family=Azeret+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;700&display=swap');

:root {
    --bg: #0a0a12;
    --text: #f0f0f0;
    --muted: #8892a0;
    --green: #4ade80;
    --yellow: #fbbf24;
    --red: #f87171;
    --cyan: #22d3ee;
    --pink: #f472b6;
    --orange: #fb923c;
    --purple: #a78bfa;
    --font-pixel: 'Silkscreen', cursive;
    --font-mono: 'Azeret Mono', monospace;
    --font-body: 'Space Grotesk', sans-serif;
}

* { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
html, body { height:100%; overflow:hidden; }
body { font-family:'Space Grotesk',sans-serif; background:var(--bg); color:var(--text); }

.gallery { display:flex; height:100%; transition:transform 0.5s cubic-bezier(0.22, 1, 0.36, 1); }

.slide {
    min-width:100vw; height:100vh;
    display:flex; flex-direction:column; justify-content:center; align-items:center;
    padding:40px 32px 80px; text-align:center; background:var(--bg);
}

.slide.intro { background:linear-gradient(145deg,#12121f 0%,#1a1a2e 50%,#0f2847 100%); }
.slide.pink-bg { background:linear-gradient(145deg,#12121f 0%,#2d1a3d 100%); }
.slide.purple-bg { background:linear-gradient(145deg,#12121f 0%,#1f1a3d 100%); }
.slide.orange-bg { background:linear-gradient(145deg,#12121f 0%,#2d1f1a 100%); }
.slide.red-bg { background:linear-gradient(145deg,#12121f 0%,#2d1a1a 100%); }
.slide.summary-slide { background:linear-gradient(145deg,#0f2847 0%,#12121f 50%,#1a1a2e 100%); }

.slide h1 { font-family:var(--font-pixel); font-size:36px; font-weight:400; line-height:1.2; margin:20px 0; }
.slide-label { font-family:var(--font-pixel); font-size:10px; font-weight:400; color:var(--green); text-transform:uppercase; letter-spacing:0.5px; margin-bottom:16px; }
.slide-icon { font-size:80px; margin-bottom:16px; }
.slide-text { font-size:18px; color:var(--muted); margin:8px 0; }
.subtitle { font-size:18px; color:var(--muted); margin-top:8px; }

.big-number { font-family:var(--font-mono); font-size:80px; font-weight:500; line-height:1; letter-spacing:-2px; }
.pct { font-family:var(--font-body); font-size:48px; }
.huge-name { font-family:var(--font-body); font-size:32px; font-weight:600; line-height:1.25; word-break:break-word; max-width:90%; margin:16px 0; }
.personality-type { font-family:var(--font-pixel); font-size:18px; font-weight:400; line-height:1.25; color:var(--purple); margin:24px 0; text-transform:uppercase; letter-spacing:0.5px; }
.roast { font-style:italic; color:var(--muted); font-size:18px; margin-top:16px; max-width:400px; }

.green { color:var(--green); }
.yellow { color:var(--yellow); }
.red { color:var(--red); }
.cyan { color:var(--cyan); }
.pink { color:var(--pink); }
.orange { color:var(--orange); }
.purple { color:var(--purple); }

.stat-grid { display:flex; gap:40px; margin-top:28px; }
.stat-item { display:flex; flex-direction:column; align-items:center; }
.stat-num { font-family:var(--font-mono); font-size:24px; font-weight:600; color:var(--cyan); }
.stat-lbl { font-size:11px; color:var(--muted); margin-top:6px; text-transform:uppercase; letter-spacing:0.5px; }

.rank-list { width:100%; max-width:420px; margin-top:20px; }
.rank-item { display:flex; align-items:center; padding:14px 0; border-bottom:1px solid rgba(255,255,255,0.1); gap:16px; }
.rank-item:first-child { background:linear-gradient(90deg, rgba(74,222,128,0.15) 0%, transparent 100%); padding:14px 12px; margin:0 -12px; border-radius:8px; border-bottom:none; }
.rank-item:first-child .rank-name { font-weight:600; color:var(--green); }
.rank-item:first-child .rank-count { font-size:20px; }
.rank-num { font-family:var(--font-mono); font-size:20px; font-weight:600; color:var(--green); width:36px; text-align:center; }
.rank-name { flex:1; font-size:16px; text-align:left; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.rank-count { font-family:var(--font-mono); font-size:18px; font-weight:600; color:var(--yellow); }

.badge { display:inline-block; padding:8px 18px; border-radius:24px; font-family:var(--font-pixel); font-size:9px; font-weight:400; text-transform:uppercase; letter-spacing:0.3px; margin-top:20px; border:2px solid; }
.badge.green { border-color:var(--green); color:var(--green); background:rgba(74,222,128,0.1); }
.badge.yellow { border-color:var(--yellow); color:var(--yellow); background:rgba(251,191,36,0.1); }
.badge.red { border-color:var(--red); color:var(--red); background:rgba(248,113,113,0.1); }

.emoji-row { font-size:64px; letter-spacing:20px; margin:28px 0; }

.tap-hint { position:absolute; bottom:60px; font-size:16px; color:var(--muted); animation:pulse 2s infinite; }
@keyframes pulse { 0%,100%{opacity:0.4} 50%{opacity:1} }

/* === SLIDE ANIMATIONS === */
/* Base hidden state */
.slide .slide-label,
.slide .slide-text,
.slide .slide-icon,
.slide .big-number,
.slide .huge-name,
.slide .personality-type,
.slide .roast,
.slide .badge,
.slide .stat-grid,
.slide .stat-item,
.slide .rank-list,
.slide .rank-item,
.slide .emoji-row,
.slide h1,
.slide .subtitle,
.slide .summary-card {
    opacity: 0;
    transform: translateY(20px);
}

/* Default animations */
.slide.active .slide-label { animation: labelSlide 0.5s cubic-bezier(0.22, 1, 0.36, 1) forwards; }
.slide.active .slide-text { animation: textFade 0.4s ease-out 0.12s forwards; }
.slide.active .slide-icon { animation: iconPop 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.08s forwards; }
.slide.active h1 { animation: titleReveal 0.6s cubic-bezier(0.22, 1, 0.36, 1) 0.15s forwards; }
.slide.active .subtitle { animation: textFade 0.4s ease-out 0.3s forwards; }
.slide.active .big-number { animation: numberPop 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.2s forwards; }
.slide.active .huge-name { animation: namePop 0.5s cubic-bezier(0.22, 1, 0.36, 1) 0.25s forwards; }
.slide.active .personality-type { animation: glitchReveal 0.9s ease-out 0.2s forwards; }
.slide.active .roast { animation: roastFade 0.5s ease-out 0.45s forwards; }
.slide.active .badge { animation: badgePop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.55s forwards; }
.slide.active .stat-grid { animation: none; opacity: 1; transform: none; }
.slide.active .stat-item { animation: statPop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; }
.slide.active .stat-item:nth-child(1) { animation-delay: 0.35s; }
.slide.active .stat-item:nth-child(2) { animation-delay: 0.42s; }
.slide.active .stat-item:nth-child(3) { animation-delay: 0.49s; }
.slide.active .rank-list { animation: none; opacity: 1; transform: none; }
.slide.active .rank-item { animation: rankSlide 0.45s cubic-bezier(0.22, 1, 0.36, 1) forwards; }
.slide.active .rank-item:first-child { animation: topRankReveal 0.55s cubic-bezier(0.22, 1, 0.36, 1) forwards; }
.slide.active .emoji-row { animation: emojiReveal 0.7s cubic-bezier(0.22, 1, 0.36, 1) 0.25s forwards; }
.slide.active .summary-card { animation: cardReveal 0.7s cubic-bezier(0.22, 1, 0.36, 1) 0.1s forwards; }

/* Staggered rank items */
.slide.active .rank-item:nth-child(1) { animation-delay: 0.12s; }
.slide.active .rank-item:nth-child(2) { animation-delay: 0.22s; }
.slide.active .rank-item:nth-child(3) { animation-delay: 0.32s; }
.slide.active .rank-item:nth-child(4) { animation-delay: 0.42s; }
.slide.active .rank-item:nth-child(5) { animation-delay: 0.52s; }

/* ===== SLIDE-SPECIFIC ANIMATIONS ===== */

/* INTRO SLIDE - Dramatic entrance */
.slide.intro.active .slide-icon { animation: introIconSpin 0.9s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; }
.slide.intro.active h1 { animation: introTitleGlitch 0.7s ease-out 0.35s forwards; }
.slide.intro.active .subtitle { animation: subtitleFade 0.5s ease-out 0.6s forwards; }

/* SLIDE 2: Total messages - Impact */
.slide:nth-child(2).active .big-number { animation: impactNumber 0.7s cubic-bezier(0.22, 1, 0.36, 1) 0.15s forwards; }
.slide:nth-child(2).active .stat-item:nth-child(1) { animation-delay: 0.4s; }
.slide:nth-child(2).active .stat-item:nth-child(2) { animation-delay: 0.5s; }
.slide:nth-child(2).active .stat-item:nth-child(3) { animation-delay: 0.6s; }

/* SLIDE 3: Words - Typewriter with cursor feel */
.slide:nth-child(3).active .big-number { animation: typeNumber 0.6s steps(4) 0.15s forwards; }
.slide:nth-child(3).active .roast { animation: roastTypeIn 0.5s ease-out 0.5s forwards; }

/* PINK SLIDE (#1 person) - Heartbeat */
.slide.pink-bg.active .slide-label { animation: labelGlow 0.5s ease-out forwards; }
.slide.pink-bg.active .huge-name { animation: heartbeatName 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.15s forwards; }
.slide.pink-bg.active .big-number { animation: loveNumber 0.6s cubic-bezier(0.22, 1, 0.36, 1) 0.4s forwards; }

/* SLIDE 5: Inner Circle - Cascade */
.slide:nth-child(5).active .rank-item { animation: cascadeIn 0.4s cubic-bezier(0.22, 1, 0.36, 1) forwards; }
.slide:nth-child(5).active .rank-item:first-child { animation: crownReveal 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; }

/* SLIDE 6: Group Chats - Gather effect */
.slide:nth-child(6).active .slide-icon { animation: groupGather 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.05s forwards; }
.slide:nth-child(6).active .big-number { animation: groupCount 0.6s cubic-bezier(0.22, 1, 0.36, 1) 0.25s forwards; }
.slide:nth-child(6).active .stat-item:nth-child(1) { animation-delay: 0.45s; }
.slide:nth-child(6).active .stat-item:nth-child(2) { animation-delay: 0.52s; }
.slide:nth-child(6).active .stat-item:nth-child(3) { animation-delay: 0.59s; }
.slide:nth-child(6).active .badge { animation: contributorBadge 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.7s forwards; }

/* SLIDE 7: Top Groups - Trophy cascade (orange-bg handles fire effect) */
.slide:nth-child(7).active .rank-item { animation: trophyCascade 0.45s cubic-bezier(0.22, 1, 0.36, 1) forwards; }
.slide:nth-child(7).active .rank-item:first-child { animation: goldReveal 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; }
.slide:nth-child(7).active .rank-item:nth-child(1) { animation-delay: 0.1s; }
.slide:nth-child(7).active .rank-item:nth-child(2) { animation-delay: 0.2s; }
.slide:nth-child(7).active .rank-item:nth-child(3) { animation-delay: 0.3s; }
.slide:nth-child(7).active .rank-item:nth-child(4) { animation-delay: 0.4s; }
.slide:nth-child(7).active .rank-item:nth-child(5) { animation-delay: 0.5s; }

/* PURPLE SLIDE (Personality) - Glitch chaos */
.slide.purple-bg.active .slide-label { animation: labelGlitch 0.6s ease-out forwards; }
.slide.purple-bg.active .personality-type { animation: personalityGlitch 1s ease-out 0.15s forwards; }
.slide.purple-bg.active .roast { animation: flickerReveal 0.7s ease-out 0.55s forwards; }

/* SLIDE 9: Conversation starter - Fill effect */
.slide:nth-child(9).active .big-number { animation: percentReveal 0.7s cubic-bezier(0.22, 1, 0.36, 1) 0.15s forwards; }
.slide:nth-child(9).active .badge { animation: badgeSlam 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.55s forwards; }

/* SLIDE 10: Response time - Timer */
.slide:nth-child(10).active .big-number { animation: timerReveal 0.6s cubic-bezier(0.22, 1, 0.36, 1) 0.15s forwards; }
.slide:nth-child(10).active .badge { animation: badgePop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.5s forwards; }

/* SLIDE 11: Peak hours - Clock */
.slide:nth-child(11).active .big-number { animation: clockReveal 0.6s cubic-bezier(0.22, 1, 0.36, 1) 0.15s forwards; }

/* SLIDE 12: 3AM bestie - Dreamy moon */
.slide:nth-child(12).active .slide-icon { animation: moonFloat 1.1s cubic-bezier(0.22, 1, 0.36, 1) 0.05s forwards; }
.slide:nth-child(12).active .huge-name { animation: dreamyName 0.6s ease-out 0.35s forwards; }
.slide:nth-child(12).active .big-number { animation: softNumber 0.5s ease-out 0.5s forwards; }

/* SLIDE 13: Busiest day - Calendar flip */
.slide:nth-child(13).active .big-number { animation: calendarFlip 0.65s cubic-bezier(0.22, 1, 0.36, 1) 0.15s forwards; }
.slide:nth-child(13).active .roast { animation: shakeReveal 0.5s ease-out 0.5s forwards; }

/* SLIDE 14: Biggest fan - Excited */
.slide:nth-child(14).active .huge-name { animation: fanName 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.15s forwards; }
.slide:nth-child(14).active .big-number { animation: excitedNumber 0.7s cubic-bezier(0.34, 1.56, 0.64, 1) 0.35s forwards; }

/* RED SLIDE (Down Bad) - Dramatic */
.slide.red-bg.active .slide-label { animation: labelPulse 0.5s ease-out forwards; }
.slide.red-bg.active .huge-name { animation: dramaticDrop 0.7s cubic-bezier(0.22, 1, 0.36, 1) 0.15s forwards; }
.slide.red-bg.active .big-number { animation: desperateNumber 0.6s ease-out 0.45s forwards; }

/* ORANGE SLIDE (Heating Up) - Fire */
.slide.orange-bg.active .slide-label { animation: fireLabel 0.5s ease-out forwards; }
.slide.orange-bg.active .rank-item { animation: fireRise 0.5s cubic-bezier(0.22, 1, 0.36, 1) forwards; }
.slide.orange-bg.active .rank-item:first-child { animation: fireTop 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards; }
.slide.orange-bg.active .rank-item:nth-child(1) { animation-delay: 0.08s; }
.slide.orange-bg.active .rank-item:nth-child(2) { animation-delay: 0.18s; }
.slide.orange-bg.active .rank-item:nth-child(3) { animation-delay: 0.28s; }
.slide.orange-bg.active .rank-item:nth-child(4) { animation-delay: 0.38s; }
.slide.orange-bg.active .rank-item:nth-child(5) { animation-delay: 0.48s; }

/* SLIDE 17: Ghosted - Spooky */
.slide:nth-child(17).active .rank-item { animation: ghostSlide 0.5s ease-out forwards; }
.slide:nth-child(17).active .rank-item:first-child { animation: ghostTop 0.6s ease-out forwards; }
.slide:nth-child(17).active .roast { animation: ghostText 0.4s ease-out 0.6s forwards; }

/* SLIDE 18: Emojis - Wave each emoji */
.slide:nth-child(18).active .emoji-row { animation: emojiContainer 0.6s ease-out 0.2s forwards; }

/* SUMMARY SLIDE - Grand finale */
.slide.summary-slide.active .summary-card { animation: summaryReveal 0.8s cubic-bezier(0.22, 1, 0.36, 1) 0.1s forwards; }

/* Screenshot and share */
.slide.active .screenshot-btn { opacity: 0; animation: buttonSlide 0.5s cubic-bezier(0.22, 1, 0.36, 1) 0.6s forwards; }
.slide.active .share-hint { opacity: 0; animation: hintFade 0.4s ease-out 0.8s forwards; }

/* SLIDE TRANSITIONS */
.gallery { transition: transform 0.55s cubic-bezier(0.22, 1, 0.36, 1); }

/* ===== KEYFRAMES ===== */

/* Base animations */
@keyframes labelSlide {
    0% { opacity: 0; transform: translateY(12px) translateX(-8px); }
    100% { opacity: 1; transform: translateY(0) translateX(0); }
}

@keyframes textFade {
    0% { opacity: 0; transform: translateY(15px); }
    100% { opacity: 1; transform: translateY(0); }
}

@keyframes titleReveal {
    0% { opacity: 0; transform: translateY(25px) scale(0.95); }
    70% { transform: translateY(-3px) scale(1.01); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes iconPop {
    0% { opacity: 0; transform: translateY(20px) scale(0.4) rotate(-15deg); }
    50% { transform: translateY(-8px) scale(1.15) rotate(8deg); }
    75% { transform: translateY(2px) scale(0.95) rotate(-3deg); }
    100% { opacity: 1; transform: translateY(0) scale(1) rotate(0); }
}

@keyframes numberPop {
    0% { opacity: 0; transform: translateY(30px) scale(0.7); }
    60% { transform: translateY(-6px) scale(1.08); }
    80% { transform: translateY(2px) scale(0.98); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes namePop {
    0% { opacity: 0; transform: translateY(25px) scale(0.9); }
    70% { transform: translateY(-4px) scale(1.03); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes roastFade {
    0% { opacity: 0; transform: translateY(12px); }
    100% { opacity: 1; transform: translateY(0); }
}

@keyframes statPop {
    0% { opacity: 0; transform: translateY(18px) scale(0.85); }
    60% { transform: translateY(-4px) scale(1.05); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes rankSlide {
    0% { opacity: 0; transform: translateX(-25px); }
    100% { opacity: 1; transform: translateX(0); }
}

@keyframes topRankReveal {
    0% { opacity: 0; transform: translateX(-35px) scale(0.95); }
    60% { transform: translateX(6px) scale(1.02); }
    100% { opacity: 1; transform: translateX(0) scale(1); }
}

@keyframes badgePop {
    0% { opacity: 0; transform: translateY(15px) scale(0.6); }
    50% { transform: translateY(-6px) scale(1.15); }
    75% { transform: translateY(2px) scale(0.95); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes emojiReveal {
    0% { opacity: 0; transform: translateY(25px) scale(0.8); letter-spacing: 40px; }
    60% { transform: translateY(-5px) scale(1.02); letter-spacing: 15px; }
    100% { opacity: 1; transform: translateY(0) scale(1); letter-spacing: 20px; }
}

@keyframes cardReveal {
    0% { opacity: 0; transform: translateY(50px) scale(0.92); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

/* Intro slide */
@keyframes introIconSpin {
    0% { opacity: 0; transform: translateY(30px) scale(0.2) rotate(-270deg); }
    50% { transform: translateY(-15px) scale(1.2) rotate(15deg); }
    75% { transform: translateY(5px) scale(0.9) rotate(-5deg); }
    100% { opacity: 1; transform: translateY(0) scale(1) rotate(0); }
}

@keyframes introTitleGlitch {
    0% { opacity: 0; transform: translateY(20px); filter: blur(8px); }
    30% { opacity: 0.7; transform: translateY(5px) skewX(-5deg); filter: blur(3px); }
    50% { transform: translateY(-3px) skewX(3deg); filter: blur(1px); }
    70% { transform: translateY(2px) skewX(-1deg); }
    100% { opacity: 1; transform: translateY(0) skewX(0); filter: blur(0); }
}

@keyframes subtitleFade {
    0% { opacity: 0; transform: translateY(15px); }
    100% { opacity: 1; transform: translateY(0); }
}

/* Impact number (slide 2) */
@keyframes impactNumber {
    0% { opacity: 0; transform: translateY(50px) scale(0.6); }
    40% { transform: translateY(-12px) scale(1.1); }
    60% { transform: translateY(5px) scale(0.95); }
    80% { transform: translateY(-2px) scale(1.02); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

/* Typewriter (slide 3) */
@keyframes typeNumber {
    0% { opacity: 0; clip-path: inset(0 100% 0 0); }
    100% { opacity: 1; clip-path: inset(0 0 0 0); }
}

@keyframes roastTypeIn {
    0% { opacity: 0; transform: translateY(10px); }
    100% { opacity: 1; transform: translateY(0); }
}

/* Pink slide - heartbeat */
@keyframes labelGlow {
    0% { opacity: 0; transform: translateY(12px); }
    100% { opacity: 1; transform: translateY(0); }
}

@keyframes heartbeatName {
    0% { opacity: 0; transform: translateY(30px) scale(0.7); }
    35% { transform: translateY(-8px) scale(1.18); }
    50% { transform: translateY(3px) scale(0.92); }
    65% { transform: translateY(-4px) scale(1.08); }
    80% { transform: translateY(1px) scale(0.98); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes loveNumber {
    0% { opacity: 0; transform: translateY(20px) scale(0.8) rotate(-5deg); }
    60% { transform: translateY(-5px) scale(1.08) rotate(2deg); }
    100% { opacity: 1; transform: translateY(0) scale(1) rotate(0); }
}

/* Cascade (slide 5) */
@keyframes cascadeIn {
    0% { opacity: 0; transform: translateX(-30px) translateY(10px); }
    100% { opacity: 1; transform: translateX(0) translateY(0); }
}

@keyframes crownReveal {
    0% { opacity: 0; transform: translateX(-40px) scale(0.9); }
    50% { transform: translateX(8px) scale(1.05); }
    75% { transform: translateX(-3px) scale(0.98); }
    100% { opacity: 1; transform: translateX(0) scale(1); }
}

/* Purple slide - glitch */
@keyframes labelGlitch {
    0% { opacity: 0; transform: translateY(12px); }
    30% { opacity: 0.5; transform: translateY(5px) skewX(-3deg); }
    60% { opacity: 0.8; transform: translateY(-2px) skewX(2deg); }
    100% { opacity: 1; transform: translateY(0) skewX(0); }
}

@keyframes personalityGlitch {
    0% { opacity: 0; transform: translateY(25px); filter: blur(10px); }
    15% { opacity: 0.4; transform: translateY(15px) skewX(-12deg); filter: blur(6px); }
    30% { opacity: 0.6; transform: translateY(8px) skewX(8deg); filter: blur(4px); }
    45% { opacity: 0.8; transform: translateY(3px) skewX(-5deg); filter: blur(2px); }
    60% { transform: translateY(-2px) skewX(3deg); filter: blur(1px); }
    75% { transform: translateY(1px) skewX(-1deg); }
    90% { transform: skewX(0.5deg); }
    100% { opacity: 1; transform: translateY(0) skewX(0); filter: blur(0); }
}

@keyframes flickerReveal {
    0% { opacity: 0; transform: translateY(10px); }
    15% { opacity: 0.3; }
    30% { opacity: 0.1; }
    45% { opacity: 0.6; }
    60% { opacity: 0.2; }
    75% { opacity: 0.8; }
    90% { opacity: 0.5; }
    100% { opacity: 1; transform: translateY(0); }
}

@keyframes glitchReveal {
    0% { opacity: 0; transform: translateY(20px); filter: blur(6px); }
    25% { opacity: 0.5; transform: translateY(10px) skewX(-6deg); filter: blur(3px); }
    50% { opacity: 0.8; transform: translateY(3px) skewX(4deg); filter: blur(1px); }
    75% { transform: translateY(-1px) skewX(-1deg); }
    100% { opacity: 1; transform: translateY(0) skewX(0); filter: blur(0); }
}

/* Percent (slide 7) */
@keyframes percentReveal {
    0% { opacity: 0; transform: scale(0.4); }
    50% { transform: scale(1.12); }
    75% { transform: scale(0.95); }
    100% { opacity: 1; transform: scale(1); }
}

@keyframes badgeSlam {
    0% { opacity: 0; transform: translateY(-30px) scale(1.3); }
    50% { transform: translateY(5px) scale(0.9); }
    75% { transform: translateY(-3px) scale(1.05); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

/* Calendar (slide 8) */
@keyframes calendarFlip {
    0% { opacity: 0; transform: perspective(400px) rotateX(-90deg) translateY(20px); }
    50% { transform: perspective(400px) rotateX(15deg); }
    75% { transform: perspective(400px) rotateX(-5deg); }
    100% { opacity: 1; transform: perspective(400px) rotateX(0) translateY(0); }
}

@keyframes shakeReveal {
    0% { opacity: 0; transform: translateY(10px); }
    30% { transform: translateX(-4px); }
    50% { transform: translateX(4px); }
    70% { transform: translateX(-2px); }
    100% { opacity: 1; transform: translateY(0) translateX(0); }
}

/* Moon (slide 9) */
@keyframes moonFloat {
    0% { opacity: 0; transform: translateY(30px) scale(0.4); filter: brightness(0.3) blur(5px); }
    40% { filter: brightness(1.6) blur(0); }
    60% { transform: translateY(-12px) scale(1.1); filter: brightness(1.3); }
    80% { transform: translateY(3px) scale(0.95); filter: brightness(1.1); }
    100% { opacity: 1; transform: translateY(0) scale(1); filter: brightness(1); }
}

@keyframes dreamyName {
    0% { opacity: 0; transform: translateY(20px); filter: blur(4px); }
    100% { opacity: 1; transform: translateY(0); filter: blur(0); }
}

@keyframes softNumber {
    0% { opacity: 0; transform: translateY(15px) scale(0.9); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

/* Clock (slide 10) */
@keyframes clockReveal {
    0% { opacity: 0; transform: translateY(20px) rotate(-20deg); }
    40% { transform: translateY(-5px) rotate(8deg); }
    60% { transform: translateY(2px) rotate(-4deg); }
    80% { transform: rotate(2deg); }
    100% { opacity: 1; transform: translateY(0) rotate(0); }
}

/* Fire (orange slides) */
@keyframes fireLabel {
    0% { opacity: 0; transform: translateY(12px); filter: brightness(1.5); }
    100% { opacity: 1; transform: translateY(0); filter: brightness(1); }
}

@keyframes fireRise {
    0% { opacity: 0; transform: translateY(35px) scale(0.9); filter: brightness(1.6); }
    40% { filter: brightness(1.4); }
    70% { transform: translateY(-3px) scale(1.02); filter: brightness(1.2); }
    100% { opacity: 1; transform: translateY(0) scale(1); filter: brightness(1); }
}

@keyframes fireTop {
    0% { opacity: 0; transform: translateY(40px) scale(0.9); filter: brightness(2); }
    50% { filter: brightness(1.5); }
    75% { transform: translateY(-5px) scale(1.03); filter: brightness(1.2); }
    100% { opacity: 1; transform: translateY(0) scale(1); filter: brightness(1); }
}

/* Fan (slide 12) */
@keyframes fanName {
    0% { opacity: 0; transform: translateY(25px) scale(0.85); }
    50% { transform: translateY(-8px) scale(1.1); }
    75% { transform: translateY(3px) scale(0.97); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes excitedNumber {
    0% { opacity: 0; transform: translateY(35px) scale(0.7); }
    25% { transform: translateY(-18px) scale(1.15); }
    45% { transform: translateY(8px) scale(0.92); }
    65% { transform: translateY(-6px) scale(1.05); }
    85% { transform: translateY(2px) scale(0.98); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

/* Red slide - dramatic */
@keyframes labelPulse {
    0% { opacity: 0; transform: translateY(12px); }
    50% { opacity: 0.7; transform: translateY(3px) scale(1.05); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes dramaticDrop {
    0% { opacity: 0; transform: translateY(-60px) scale(1.3); }
    50% { transform: translateY(12px) scale(0.92); }
    75% { transform: translateY(-5px) scale(1.03); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes desperateNumber {
    0% { opacity: 0; transform: translateY(20px) scale(0.6); }
    35% { transform: translateY(-8px) scale(1.2); }
    55% { transform: translateY(4px) scale(0.9); }
    75% { transform: translateY(-2px) scale(1.05); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

/* Ghost (slide 14) */
@keyframes ghostSlide {
    0% { opacity: 0; transform: translateX(-25px); filter: blur(6px); }
    100% { opacity: 0.85; transform: translateX(0); filter: blur(0); }
}

@keyframes ghostTop {
    0% { opacity: 0; transform: translateX(-35px) scale(0.95); filter: blur(8px); }
    100% { opacity: 1; transform: translateX(0) scale(1); filter: blur(0); }
}

@keyframes ghostText {
    0% { opacity: 0; transform: translateY(8px); filter: blur(3px); }
    100% { opacity: 1; transform: translateY(0); filter: blur(0); }
}

/* Timer (slide 15) */
@keyframes timerReveal {
    0% { opacity: 0; transform: translateY(25px); }
    30% { transform: translateY(-5px) rotate(5deg); }
    50% { transform: translateY(2px) rotate(-3deg); }
    70% { transform: rotate(1deg); }
    100% { opacity: 1; transform: translateY(0) rotate(0); }
}

/* Emoji (slide 16) */
@keyframes emojiContainer {
    0% { opacity: 0; transform: translateY(30px) scale(0.7); }
    50% { transform: translateY(-8px) scale(1.05); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

/* Group chats (slide 17) */
@keyframes groupGather {
    0% { opacity: 0; transform: translateY(25px) scale(0.3); }
    30% { transform: translateY(-5px) scale(1.25); }
    50% { transform: translateY(5px) scale(0.9); }
    70% { transform: translateY(-3px) scale(1.1); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes groupCount {
    0% { opacity: 0; transform: translateY(30px) scale(0.6); }
    50% { transform: translateY(-8px) scale(1.1); }
    75% { transform: translateY(3px) scale(0.97); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes contributorBadge {
    0% { opacity: 0; transform: translateY(20px) scale(0.5); }
    50% { transform: translateY(-8px) scale(1.2); }
    75% { transform: translateY(2px) scale(0.95); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

/* Top groups (slide 18) */
@keyframes trophyCascade {
    0% { opacity: 0; transform: translateX(-30px) translateY(15px); }
    60% { transform: translateX(5px) translateY(-3px); }
    100% { opacity: 1; transform: translateX(0) translateY(0); }
}

@keyframes goldReveal {
    0% { opacity: 0; transform: translateX(-40px) scale(0.9); filter: brightness(1.5); }
    50% { transform: translateX(8px) scale(1.05); filter: brightness(1.3); }
    75% { transform: translateX(-3px) scale(0.98); filter: brightness(1.1); }
    100% { opacity: 1; transform: translateX(0) scale(1); filter: brightness(1); }
}

/* Summary (slide 19) */
@keyframes summaryReveal {
    0% { opacity: 0; transform: translateY(60px) scale(0.88); }
    50% { transform: translateY(-8px) scale(1.02); }
    75% { transform: translateY(3px) scale(0.99); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes buttonSlide {
    0% { opacity: 0; transform: translateY(20px); }
    100% { opacity: 1; transform: translateY(0); }
}

@keyframes hintFade {
    0% { opacity: 0; transform: translateY(10px); }
    100% { opacity: 1; transform: translateY(0); }
}

.summary-card {
    background:linear-gradient(145deg,#1a1a2e 0%,#0f1a2e 100%);
    border:2px solid rgba(255,255,255,0.1);
    border-radius:24px; padding:32px;
    width:100%; max-width:420px; text-align:center;
}
.summary-header { display:flex; align-items:center; justify-content:center; gap:12px; margin-bottom:24px; padding-bottom:16px; border-bottom:1px solid rgba(255,255,255,0.1); }
.summary-logo { font-size:28px; }
.summary-title { font-family:var(--font-pixel); font-size:11px; font-weight:400; color:var(--text); }
.summary-hero { margin:24px 0; }
.summary-big-stat { display:flex; flex-direction:column; align-items:center; }
.summary-big-num { font-family:var(--font-mono); font-size:56px; font-weight:600; color:var(--green); line-height:1; letter-spacing:-1px; }
.summary-big-label { font-size:13px; color:var(--muted); text-transform:uppercase; letter-spacing:1px; margin-top:8px; }
.summary-stats { display:grid; grid-template-columns:repeat(2,1fr); gap:16px 24px; margin:24px 0; padding:20px 0; border-top:1px solid rgba(255,255,255,0.1); border-bottom:1px solid rgba(255,255,255,0.1); }
.summary-stat { display:flex; flex-direction:column; align-items:center; }
.summary-stat-val { font-family:var(--font-mono); font-size:22px; font-weight:600; color:var(--cyan); }
.summary-stat-lbl { font-size:10px; color:var(--muted); text-transform:uppercase; margin-top:4px; letter-spacing:0.3px; }
.summary-personality { margin:20px 0; }
.summary-personality-type { font-family:var(--font-pixel); font-size:12px; font-weight:400; color:var(--purple); text-transform:uppercase; letter-spacing:0.3px; }
.summary-top3 { margin:16px 0; display:flex; flex-direction:column; gap:6px; }
.summary-top3-label { font-size:10px; color:var(--muted); text-transform:uppercase; letter-spacing:0.5px; }
.summary-top3-names { font-size:13px; color:var(--text); }
.summary-footer { margin-top:20px; padding-top:16px; border-top:1px solid rgba(255,255,255,0.1); font-size:11px; color:var(--green); font-family:var(--font-pixel); font-weight:400; }

.screenshot-btn {
    display:flex; align-items:center; justify-content:center; gap:10px;
    font-family:var(--font-pixel); font-size:10px; font-weight:400; text-transform:uppercase; letter-spacing:0.3px;
    background:var(--green); color:#000; border:none;
    padding:16px 32px; border-radius:12px; margin-top:28px;
    cursor:pointer; transition:transform 0.2s,background 0.2s;
}
.screenshot-btn:hover { background:#6ee7b7; transform:scale(1.02); }
.screenshot-btn:active { transform:scale(0.98); }
.btn-icon { font-size:20px; }
.share-hint { font-size:14px; color:var(--muted); margin-top:16px; }

.progress { position:fixed; bottom:24px; left:50%; transform:translateX(-50%); display:flex; gap:8px; z-index:100; }
.dot { width:10px; height:10px; border-radius:50%; background:rgba(255,255,255,0.2); transition:all 0.3s; cursor:pointer; }
.dot:hover { background:rgba(255,255,255,0.4); }
.dot.active { background:var(--green); transform:scale(1.3); }

.nav { position:fixed; top:50%; transform:translateY(-50%); font-size:36px; color:rgba(255,255,255,0.2); cursor:pointer; z-index:100; padding:24px; transition:color 0.2s; user-select:none; }
.nav:hover { color:rgba(255,255,255,0.5); }
.nav.prev { left:8px; }
.nav.next { right:8px; }
.nav.hidden { opacity:0; pointer-events:none; }
</style>
</head>
<body>

<div class="gallery" id="gallery">
    <!-- 1: Intro -->
    <div class="slide intro">
        <div class="slide-icon">üì±</div>
        <h1>iMESSAGE<br>WRAPPED</h1>
        <p class="subtitle">your 2025 texting habits, exposed</p>
        <div class="tap-hint">click anywhere to start ‚Üí</div>
    </div>

    <!-- 2: Total -->
    <div class="slide">
        <div class="slide-label">// TOTAL DAMAGE</div>
        <div class="big-number green">47,832</div>
        <div class="slide-text">messages this year</div>
        <div class="stat-grid">
            <div class="stat-item"><span class="stat-num">131</span><span class="stat-lbl">/day</span></div>
            <div class="stat-item"><span class="stat-num">24,891</span><span class="stat-lbl">sent</span></div>
            <div class="stat-item"><span class="stat-num">22,941</span><span class="stat-lbl">received</span></div>
        </div>
    </div>

    <!-- 3: Words -->
    <div class="slide">
        <div class="slide-label">// WORD COUNT</div>
        <div class="big-number cyan">892K</div>
        <div class="slide-text">words you typed</div>
        <div class="roast">that's about 3,568 pages of a novel</div>
    </div>

    <!-- 4: #1 -->
    <div class="slide pink-bg">
        <div class="slide-label">// YOUR #1</div>
        <div class="slide-text">most texted person</div>
        <div class="huge-name pink">Alex Chen</div>
        <div class="big-number yellow">11,247</div>
        <div class="slide-text">messages</div>
    </div>

    <!-- 5: Top 5 -->
    <div class="slide">
        <div class="slide-label">// INNER CIRCLE</div>
        <div class="slide-text">your top 5</div>
        <div class="rank-list">
            <div class="rank-item"><span class="rank-num">1</span><span class="rank-name">Alex Chen</span><span class="rank-count">11,247</span></div>
            <div class="rank-item"><span class="rank-num">2</span><span class="rank-name">Jordan Lee</span><span class="rank-count">7,823</span></div>
            <div class="rank-item"><span class="rank-num">3</span><span class="rank-name">Sam Martinez</span><span class="rank-count">4,291</span></div>
            <div class="rank-item"><span class="rank-num">4</span><span class="rank-name">Riley Kim</span><span class="rank-count">3,847</span></div>
            <div class="rank-item"><span class="rank-num">5</span><span class="rank-name">Casey Patel</span><span class="rank-count">2,156</span></div>
        </div>
    </div>

    <!-- 6: Group Chats Overview -->
    <div class="slide">
        <div class="slide-label">// GROUP CHATS</div>
        <div class="slide-icon">üë•</div>
        <div class="big-number green">6</div>
        <div class="slide-text">active group chats</div>
        <div class="stat-grid">
            <div class="stat-item"><span class="stat-num">3,847</span><span class="stat-lbl">total msgs</span></div>
            <div class="stat-item"><span class="stat-num">2,156</span><span class="stat-lbl">sent</span></div>
            <div class="stat-item"><span class="stat-num">56%</span><span class="stat-lbl">yours</span></div>
        </div>
        <div class="badge green">CONTRIBUTOR</div>
    </div>

    <!-- 7: Top Group Chats -->
    <div class="slide orange-bg">
        <div class="slide-label">// TOP GROUP CHATS</div>
        <div class="slide-text">your most active groups</div>
        <div class="rank-list">
            <div class="rank-item"><span class="rank-num">1</span><span class="rank-name">The Squad</span><span class="rank-count">1,247</span></div>
            <div class="rank-item"><span class="rank-num">2</span><span class="rank-name">Work Fam</span><span class="rank-count">892</span></div>
            <div class="rank-item"><span class="rank-num">3</span><span class="rank-name">Book Club</span><span class="rank-count">634</span></div>
            <div class="rank-item"><span class="rank-num">4</span><span class="rank-name">Family Chat</span><span class="rank-count">521</span></div>
            <div class="rank-item"><span class="rank-num">5</span><span class="rank-name">Gym Bros</span><span class="rank-count">387</span></div>
        </div>
    </div>

    <!-- 8: Personality -->
    <div class="slide purple-bg">
        <div class="slide-label">// DIAGNOSIS</div>
        <div class="slide-text">texting personality</div>
        <div class="personality-type">NOCTURNAL MENACE</div>
        <div class="roast">"terrorizes people at ungodly hours"</div>
    </div>

    <!-- 9: Conversation Starter -->
    <div class="slide">
        <div class="slide-label">// WHO TEXTS FIRST</div>
        <div class="slide-text">conversation initiator</div>
        <div class="big-number green">62<span class="pct">%</span></div>
        <div class="slide-text">of convos started by you</div>
        <div class="badge green">YOU START</div>
    </div>

    <!-- 10: Response -->
    <div class="slide">
        <div class="slide-label">// RESPONSE TIME</div>
        <div class="slide-text">avg reply</div>
        <div class="big-number yellow">23</div>
        <div class="slide-text">minutes</div>
        <div class="badge yellow">NORMAL</div>
    </div>

    <!-- 11: Peak -->
    <div class="slide">
        <div class="slide-label">// PEAK HOURS</div>
        <div class="slide-text">most active</div>
        <div class="big-number green">10PM</div>
        <div class="slide-text">on <span class="yellow">Thursdays</span></div>
    </div>

    <!-- 12: 3AM -->
    <div class="slide">
        <div class="slide-label">// 3AM BESTIE</div>
        <div class="slide-icon">üåô</div>
        <div class="huge-name cyan">Jordan Lee</div>
        <div class="big-number yellow">147</div>
        <div class="slide-text">late night texts</div>
    </div>

    <!-- 13: Busiest Day -->
    <div class="slide">
        <div class="slide-label">// BUSIEST DAY</div>
        <div class="slide-text">your most unhinged day</div>
        <div class="big-number orange">Mar 15</div>
        <div class="slide-text"><span class="yellow">523</span> messages in one day</div>
        <div class="roast">what happened??</div>
    </div>

    <!-- 14: Biggest Fan -->
    <div class="slide">
        <div class="slide-label">// BIGGEST FAN</div>
        <div class="slide-text">texts you most</div>
        <div class="huge-name orange">Taylor Swift</div>
        <div class="slide-text"><span class="big-number yellow" style="font-size:56px">2.8x</span> more than you</div>
    </div>

    <!-- 15: Down Bad -->
    <div class="slide red-bg">
        <div class="slide-label">// DOWN BAD</div>
        <div class="slide-text">you simp for</div>
        <div class="huge-name">Morgan Davis</div>
        <div class="slide-text">you text <span class="big-number yellow" style="font-size:56px">3.2x</span> more</div>
    </div>

    <!-- 16: Heating Up -->
    <div class="slide orange-bg">
        <div class="slide-label">// HEATING UP</div>
        <div class="slide-text">getting stronger in H2</div>
        <div class="rank-list">
            <div class="rank-item"><span class="rank-num">üî•</span><span class="rank-name">Chris Wang</span><span class="rank-count green">+423</span></div>
            <div class="rank-item"><span class="rank-num">üî•</span><span class="rank-name">Maya Johnson</span><span class="rank-count green">+287</span></div>
            <div class="rank-item"><span class="rank-num">üî•</span><span class="rank-name">Priya Sharma</span><span class="rank-count green">+156</span></div>
            <div class="rank-item"><span class="rank-num">üî•</span><span class="rank-name">Jake Miller</span><span class="rank-count green">+98</span></div>
            <div class="rank-item"><span class="rank-num">üî•</span><span class="rank-name">Emma Davis</span><span class="rank-count green">+72</span></div>
        </div>
    </div>

    <!-- 17: Ghosted -->
    <div class="slide">
        <div class="slide-label">// GHOSTED</div>
        <div class="slide-text">they chose peace</div>
        <div class="rank-list">
            <div class="rank-item"><span class="rank-num">üëª</span><span class="rank-name">Drew Thompson</span><span class="rank-count"><span class="green">203</span> ‚Üí <span class="red">0</span></span></div>
            <div class="rank-item"><span class="rank-num">üëª</span><span class="rank-name">Zack Miller</span><span class="rank-count"><span class="green">87</span> ‚Üí <span class="red">2</span></span></div>
            <div class="rank-item"><span class="rank-num">üëª</span><span class="rank-name">Lisa Park</span><span class="rank-count"><span class="green">64</span> ‚Üí <span class="red">1</span></span></div>
            <div class="rank-item"><span class="rank-num">üëª</span><span class="rank-name">Kevin Wu</span><span class="rank-count"><span class="green">52</span> ‚Üí <span class="red">0</span></span></div>
            <div class="rank-item"><span class="rank-num">üëª</span><span class="rank-name">Sarah Jones</span><span class="rank-count"><span class="green">41</span> ‚Üí <span class="red">1</span></span></div>
        </div>
        <div class="roast">before June ‚Üí after</div>
    </div>

    <!-- 18: Emojis -->
    <div class="slide">
        <div class="slide-label">// EMOJIS</div>
        <div class="slide-text">your emotional range</div>
        <div class="emoji-row">üòÇ  ‚ù§Ô∏è  üî•  üíÄ  üò≠</div>
    </div>

    <!-- 19: Summary -->
    <div class="slide summary-slide">
        <div class="summary-card" id="summaryCard">
            <div class="summary-header">
                <span class="summary-logo">üì±</span>
                <span class="summary-title">iMESSAGE WRAPPED 2025</span>
            </div>
            <div class="summary-hero">
                <div class="summary-big-stat">
                    <span class="summary-big-num">47,832</span>
                    <span class="summary-big-label">messages</span>
                </div>
            </div>
            <div class="summary-stats">
                <div class="summary-stat">
                    <span class="summary-stat-val">312</span>
                    <span class="summary-stat-lbl">people</span>
                </div>
                <div class="summary-stat">
                    <span class="summary-stat-val">892K</span>
                    <span class="summary-stat-lbl">words</span>
                </div>
                <div class="summary-stat">
                    <span class="summary-stat-val">62%</span>
                    <span class="summary-stat-lbl">starter</span>
                </div>
                <div class="summary-stat">
                    <span class="summary-stat-val">23m</span>
                    <span class="summary-stat-lbl">response</span>
                </div>
                <div class="summary-stat">
                    <span class="summary-stat-val">10PM</span>
                    <span class="summary-stat-lbl">peak hour</span>
                </div>
                <div class="summary-stat">
                    <span class="summary-stat-val">147</span>
                    <span class="summary-stat-lbl">3AM texts</span>
                </div>
            </div>
            <div class="summary-personality">
                <span class="summary-personality-type">NOCTURNAL MENACE</span>
            </div>
            <div class="summary-top3">
                <span class="summary-top3-label">TOP 3:</span>
                <span class="summary-top3-names">Alex Chen, Jordan Lee, Sam Martinez</span>
            </div>
            <div class="summary-footer">
                <span>wrap2025.com</span>
            </div>
        </div>
        <button class="screenshot-btn" onclick="takeScreenshot()">
            <span class="btn-icon">üì∏</span>
            <span>Save Screenshot</span>
        </button>
        <div class="share-hint">share your damage</div>
    </div>
</div>

<div class="progress" id="progress"></div>
<div class="nav prev" id="prev">‚Äπ</div>
<div class="nav next" id="next">‚Ä∫</div>

<script>
const gallery = document.getElementById('gallery');
const progressEl = document.getElementById('progress');
const prevBtn = document.getElementById('prev');
const nextBtn = document.getElementById('next');
const total = 19;
let current = 0;

for (let i = 0; i < total; i++) {
    const dot = document.createElement('div');
    dot.className = 'dot' + (i === 0 ? ' active' : '');
    dot.onclick = () => goTo(i);
    progressEl.appendChild(dot);
}
const dots = progressEl.querySelectorAll('.dot');
const slides = gallery.querySelectorAll('.slide');

function goTo(idx) {
    if (idx < 0 || idx >= total) return;
    slides.forEach(s => s.classList.remove('active'));
    current = idx;
    gallery.style.transform = `translateX(-${current * 100}vw)`;
    dots.forEach((d, i) => d.classList.toggle('active', i === current));
    prevBtn.classList.toggle('hidden', current === 0);
    nextBtn.classList.toggle('hidden', current === total - 1);
    setTimeout(() => slides[current].classList.add('active'), 50);
}

document.addEventListener('click', (e) => {
    if (e.target.closest('.nav, button, .dot')) return;
    const x = e.clientX / window.innerWidth;
    if (x < 0.3) goTo(current - 1);
    else goTo(current + 1);
});

document.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); goTo(current + 1); }
    if (e.key === 'ArrowLeft') { e.preventDefault(); goTo(current - 1); }
});

prevBtn.onclick = (e) => { e.stopPropagation(); goTo(current - 1); };
nextBtn.onclick = (e) => { e.stopPropagation(); goTo(current + 1); };

async function takeScreenshot() {
    const card = document.getElementById('summaryCard');
    const btn = document.querySelector('.screenshot-btn');
    btn.innerHTML = '<span>Saving...</span>';
    btn.disabled = true;
    try {
        const canvas = await html2canvas(card, { backgroundColor:'#0f1a2e', scale:2, logging:false, useCORS:true });
        const link = document.createElement('a');
        link.download = 'imessage_wrapped_2025.png';
        link.href = canvas.toDataURL('image/png');
        link.click();
        btn.innerHTML = '<span class="btn-icon">‚úì</span><span>Saved!</span>';
        setTimeout(() => { btn.innerHTML = '<span class="btn-icon">üì∏</span><span>Save Screenshot</span>'; btn.disabled = false; }, 2000);
    } catch (err) {
        btn.innerHTML = '<span class="btn-icon">üì∏</span><span>Save Screenshot</span>';
        btn.disabled = false;
    }
}

goTo(0);
</script>
</body></html>
